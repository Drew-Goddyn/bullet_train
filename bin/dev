#!/usr/bin/env ruby

require_relative "scripts/utils"

start_docker
start_containers
system!("bin/link")

trap("INT") do
  stop_containers
  overmind_quit
  sleep 1
  puts "Goodbye."
  exit
end

if command?("overmind")
  overmind_quit
  system("overmind start -f Procfile.dev #{ARGV.join(" ")}")
else
  system("foreman start -f Procfile.dev #{ARGV.join(" ")}")
end
